#!/usr/bin/env python
"""Just a little test to make sure that vpmb.py can be used as a library"""
import vpmb
import json

f = open("vpm_decompression_input.json")
j = json.loads(f.read())
f.close()
program_state = vpmb.State(json_input=j)
program_state.main()
print program_state.output_object.output
# OUT: [{'time': 'February 28, 2010 at 15:38', 'dive_profile': [['1', '   3.5 ', '   3.5 ', ' 1 ', ' Descent ', '    0.0', '  260.0', '   75.0', ' ', ''], ['2', '  26.5 ', '  30.0 ', ' 1 ', '  ', ' ', ' ', ' ', '  260.0', ' ']], 'gasmix': [{'helium': 0.45000000000000001, 'nitrogen': 0.40000000000000002, 'oxygen': 0.14999999999999999}], 'decompression_profile': [['3', '  2.3', '  32.3', '1', '190', '-30 ', ' ', ' ', ''], ['4', '  0.7', '  33.0', '1', ' ', ' ', '190', '1', '33', ''], ['5', '  0.3', '  33.3', '1', '180', '-30 ', ' ', ' ', ''], ['6', '  0.7', '  34.0', '1', ' ', ' ', '180', '1', '34', ''], ['7', '  0.3', '  34.3', '1', '170', '-30 ', ' ', ' ', ''], ['8', '  0.7', '  35.0', '1', ' ', ' ', '170', '1', '35', ''], ['9', '  0.3', '  35.3', '1', '160', '-30 ', ' ', ' ', ''], ['10', '  0.7', '  36.0', '1', ' ', ' ', '160', '1', '36', ''], ['11', '  0.3', '  36.3', '1', '150', '-30 ', ' ', ' ', ''], ['12', '  1.7', '  38.0', '1', ' ', ' ', '150', '2', '38', ''], ['13', '  0.3', '  38.3', '1', '140', '-30 ', ' ', ' ', ''], ['14', '  2.7', '  41.0', '1', ' ', ' ', '140', '3', '41', ''], ['15', '  0.3', '  41.3', '1', '130', '-30 ', ' ', ' ', ''], ['16', '  1.7', '  43.0', '1', ' ', ' ', '130', '2', '43', ''], ['17', '  0.3', '  43.3', '1', '120', '-30 ', ' ', ' ', ''], ['18', '  3.7', '  47.0', '1', ' ', ' ', '120', '4', '47', ''], ['19', '  0.3', '  47.3', '1', '110', '-30 ', ' ', ' ', ''], ['20', '  3.7', '  51.0', '1', ' ', ' ', '110', '4', '51', ''], ['21', '  0.3', '  51.3', '1', '100', '-30 ', ' ', ' ', ''], ['22', '  4.7', '  56.0', '1', ' ', ' ', '100', '5', '56', ''], ['23', '  0.3', '  56.3', '1', '90', '-30 ', ' ', ' ', ''], ['24', '  6.7', '  63.0', '1', ' ', ' ', '90', '7', '63', ''], ['25', '  0.3', '  63.3', '1', '80', '-30 ', ' ', ' ', ''], ['26', '  7.7', '  71.0', '1', ' ', ' ', '80', '8', '71', ''], ['27', '  0.3', '  71.3', '1', '70', '-30 ', ' ', ' ', ''], ['28', ' 10.7', '  82.0', '1', ' ', ' ', '70', '11', '82', ''], ['29', '  0.3', '  82.3', '1', '60', '-30 ', ' ', ' ', ''], ['30', ' 14.7', '  97.0', '1', ' ', ' ', '60', '15', '97', ''], ['31', '  0.3', '  97.3', '1', '50', '-30 ', ' ', ' ', ''], ['32', ' 19.7', ' 117.0', '1', ' ', ' ', '50', '20', '117', ''], ['33', '  0.3', ' 117.3', '1', '40', '-30 ', ' ', ' ', ''], ['34', ' 29.7', ' 147.0', '1', ' ', ' ', '40', '30', '147', ''], ['35', '  0.3', ' 147.3', '1', '30', '-30 ', ' ', ' ', ''], ['36', ' 47.7', ' 195.0', '1', ' ', ' ', '30', '48', '195', ''], ['37', '  0.3', ' 195.3', '1', '20', '-30 ', ' ', ' ', ''], ['38', '595.7', ' 791.0', '1', ' ', ' ', '20', '596', '791', ''], ['39', '  2.0', ' 793.0', '1', '0', '-10 ', ' ', ' ', '']], 'desc': u'TRIMIX DIVE TO 260 FSW'}, {'time': 'February 28, 2010 at 15:38', 'dive_profile': [['1', '   3.5 ', '   3.5 ', ' 1 ', ' Descent ', '    0.0', '  260.0', '   75.0', ' ', ''], ['2', '  26.5 ', '  30.0 ', ' 1 ', '  ', ' ', ' ', ' ', '  260.0', ' ']], 'gasmix': [{'helium': 0.45000000000000001, 'nitrogen': 0.40000000000000002, 'oxygen': 0.14999999999999999}, {'helium': 0.0, 'nitrogen': 0.64000000000000001, 'oxygen': 0.35999999999999999}, {'helium': 0.0, 'nitrogen': 0.0, 'oxygen': 1.0}], 'decompression_profile': [['3', '  2.3', '  32.3', '1', '190', '-30 ', ' ', ' ', ''], ['4', '  0.7', '  33.0', '1', ' ', ' ', '190', '1', '33', ''], ['5', '  0.3', '  33.3', '1', '180', '-30 ', ' ', ' ', ''], ['6', '  0.7', '  34.0', '1', ' ', ' ', '180', '1', '34', ''], ['7', '  0.3', '  34.3', '1', '170', '-30 ', ' ', ' ', ''], ['8', '  0.7', '  35.0', '1', ' ', ' ', '170', '1', '35', ''], ['9', '  0.3', '  35.3', '1', '160', '-30 ', ' ', ' ', ''], ['10', '  0.7', '  36.0', '1', ' ', ' ', '160', '1', '36', ''], ['11', '  0.3', '  36.3', '1', '150', '-30 ', ' ', ' ', ''], ['12', '  1.7', '  38.0', '1', ' ', ' ', '150', '2', '38', ''], ['13', '  0.3', '  38.3', '1', '140', '-30 ', ' ', ' ', ''], ['14', '  1.7', '  40.0', '1', ' ', ' ', '140', '2', '40', ''], ['15', '  0.3', '  40.3', '1', '130', '-30 ', ' ', ' ', ''], ['16', '  2.7', '  43.0', '1', ' ', ' ', '130', '3', '43', ''], ['17', '  0.3', '  43.3', '1', '120', '-30 ', ' ', ' ', ''], ['18', '  2.7', '  46.0', '1', ' ', ' ', '120', '3', '46', ''], ['19', '  0.3', '  46.3', '1', '110', '-30 ', ' ', ' ', ''], ['20', '  1.7', '  48.0', '2', ' ', ' ', '110', '2', '48', ''], ['21', '  0.3', '  48.3', '2', '100', '-30 ', ' ', ' ', ''], ['22', '  1.7', '  50.0', '2', ' ', ' ', '100', '2', '50', ''], ['23', '  0.3', '  50.3', '2', '90', '-30 ', ' ', ' ', ''], ['24', '  1.7', '  52.0', '2', ' ', ' ', '90', '2', '52', ''], ['25', '  0.3', '  52.3', '2', '80', '-30 ', ' ', ' ', ''], ['26', '  2.7', '  55.0', '2', ' ', ' ', '80', '3', '55', ''], ['27', '  0.3', '  55.3', '2', '70', '-30 ', ' ', ' ', ''], ['28', '  4.7', '  60.0', '2', ' ', ' ', '70', '5', '60', ''], ['29', '  0.3', '  60.3', '2', '60', '-30 ', ' ', ' ', ''], ['30', '  4.7', '  65.0', '2', ' ', ' ', '60', '5', '65', ''], ['31', '  0.3', '  65.3', '2', '50', '-30 ', ' ', ' ', ''], ['32', '  6.7', '  72.0', '2', ' ', ' ', '50', '7', '72', ''], ['33', '  0.3', '  72.3', '2', '40', '-30 ', ' ', ' ', ''], ['34', '  9.7', '  82.0', '2', ' ', ' ', '40', '10', '82', ''], ['35', '  0.3', '  82.3', '2', '30', '-30 ', ' ', ' ', ''], ['36', ' 15.7', '  98.0', '2', ' ', ' ', '30', '16', '98', ''], ['37', '  0.3', '  98.3', '2', '20', '-30 ', ' ', ' ', ''], ['38', ' 91.7', ' 190.0', '3', ' ', ' ', '20', '92', '190', ''], ['39', '  2.0', ' 192.0', '3', '0', '-10 ', ' ', ' ', '']], 'desc': u'TRIMIX DIVE TO 260 FSW'}]
